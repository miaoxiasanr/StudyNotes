#网络同步模型
##帧同步
1. 逻辑帧(Tick)
   一个逻辑值一个逻辑帧进行逻辑运算
2. 渲染帧
   一幅画面一幅画面呈现给玩家
   > 逻辑帧和渲染帧是相互独立的，比如一个游戏可以是20帧每秒的逻辑帧率，60帧每秒的渲染帧率
3. 基本概念
   只需要进行指令转发工作，客户端按照一定的帧速率去上传当前的指令操作，服务器将指令广播给所有客户端，当客户端收到指令后执行本地代码，如果指令一致，计算过程一致，那么计算的结果肯定一致，这样就可以保证所有客户端的同步。
   
4. 特点
   1. 帧同步的战斗逻辑在客户端
   2. 帧同步下，服务器只转发操作，不做任何逻辑处理。
5. 可能出现的问题以及解决方法
   1. 浮点数的精度问题
      *  原因：由于硬件差异，会有计算误差
      *  解决方法：吧浮点数放大指定倍数，客户端在接收到放大的数据后，只需要缩小即可
    2. 随机数问题
        * 大多数自带的随机数都是伪随机数，伪随机数在一些情况下会重复，不能保证客户端和服务器生成的随机数是相同的
        * 解决方法：随机数算法

6. 优点
   服务器仅仅做一些转发操作，负担小
   把指令都存储起来，可以推演出整场比赛，做回放系统很容易。
   尽可能保证多台机器的游戏表现一致。
7. 缺点
   很难保证命令一致的情况下，所有客户端的计算结果完全一致，比如RPC的时序，浮点数计算的偏差，容器排序的不确定性，随机数计算不一致等等。
   容易在本地进行作弊
   网络条件较差的客户端很容易影响其他玩家等等。
##状态同步
1. 概念
   同步各个客户端的状态，可能过程不一定同步，但保证每一次操作后的状态是一致的，通过转发服务器程序，把用户的操作作为输入实时上传到服务器，服务端通过计算结果返回给客户端。
2. 特点
   1. 状态同步的战斗逻辑在服务端
   2. 在状态同步下，客户端更像是一个服务数据的表现层
   3. 一般的流程是客户端上传到服务器，服务器收到游戏行为的结果，然后以广播的方式下发游戏的各个状态，客户端收到状态之后根据状态显示内容。
3. 优点
   逻辑处理在服务器，客户端仅仅是表现，无法作弊。
   能保证不同客户端的结果一致
4. 缺点
   客户端的资源被浪费，服务器运算负担较大，且对带宽要求更高(数据大)
##不同点
1. 核心战斗逻辑写在哪？状态同步的逻辑写在服务端，帧同步的战斗逻辑写在客户端
2. 状态同步比帧同步流量消耗大，例如一个复杂游戏的英雄属性可能有100多条，每次改变都需要同步一次，这个过程消耗巨大。
3. 帧同步的回放/观战比状态同步好，只需要保存每局所有人的操作，而状态同步的观战/回放，需要有一个回放/观战服务器，每一局战斗打响，战斗服务器除了给客户端发消息外，还需要把这些消息发送给观战/回放服务器。当有请求回放/观战时，就把储存的消息发送给客户端。
4. 状态同步的安全性比帧同步高很多，因为所有逻辑数据和数值是在服务器端，如果想作弊，必须攻击服务器。帧同步因为所有数据都在客户端，所以解析客户端的数据就可以达到自己想要的效果。
5. 服务器压力。状态同步下服务器压力比较大，因为要做更多的运算。